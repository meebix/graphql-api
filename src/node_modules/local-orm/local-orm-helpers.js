/**
 * Prepares errors array for the JSON response
 *
 * @description Sets formatted errors on jsonResponse
 * @function
 * @param {Array} errors - The errors returned from Sparkpost
 * @returns {Array} - Formatted errors for error response
 */
const setErrors = (errors) => {
  const result = [];
  const entries = Object.entries(errors);

  entries.forEach((entry) => {
    const key = entry[0];
    const values = entry[1];

    values.forEach((value) => {
      result.push({
        statusCode: '400',
        message: value,
        code: 'VALIDATION_FAILED',
        source: { field: key },
      });
    });
  });

  return result;
};

module.exports = {
  setErrors,
};
